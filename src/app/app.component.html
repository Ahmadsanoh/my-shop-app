<header class="app-header" [class.shrink]="shrinkHeader()">

  <!-- LOGO -->
  <div class="logo">
    <a routerLink="/">
      <img src="assets/my-shop.png" alt="My Shop Logo" class="logo-img" />
    </a>
  </div>

  <!-- NAV -->
  <nav class="nav-menu">
    <a routerLink="/">Home</a>
    <a routerLink="/dev/products">Shop</a>
    <a routerLink="/categories">Categories</a>
    <a routerLink="/contact">Contact</a>
    <a routerLink="/about">About</a>
  </nav>

  <!-- USER ACTIONS -->
  <div class="user-actions">

    <!-- Search -->
    <input type="text" placeholder="Search" class="search-input" [(ngModel)]="searchQuery" (keyup.enter)="onSearch()"/>

    <!-- PROFILE -->
    <div class="profile-wrapper">
      <button class="profile-btn">
        <svg class="icon-svg" viewBox="0 0 24 24">
          <path fill="#1976d2" d="M12 12c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zm0 2c-2.7 0-8 1.3-8 4v2h16v-2c0-2.7-5.3-4-8-4z"/>
        </svg>
      </button>

      <!-- PROFILE MENU -->
      <div class="profile-menu">
        <!-- NOT LOGGED IN -->
        <ng-container *ngIf="!isLoggedIn(); else loggedInMenu">
          <button (click)="goToLogin()">Login</button>
          <button (click)="goToSignup()">Sign Up</button>
        </ng-container>

        <!-- LOGGED IN -->
        <ng-template #loggedInMenu>
          <button routerLink="/account/profile">My Profile</button>
          <button routerLink="/account/orders">My Orders</button>
          <button routerLink="/account/notifications">My Notifications</button>
          <button routerLink="/account/coupons">My Coupons</button>
          <button routerLink="/account/bonus-points">My Bonus Points</button>
          <button (click)="logout()" style="color: red;">Logout</button>
        </ng-template>
      </div>
    </div>

    <!-- CART -->
    <button class="cart-btn" (click)="goToCart()">
      <svg class="icon-svg" viewBox="0 0 24 24">
        <path fill="#1976d2" d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 2h2l3.6 7.6-1.4 2.4c-.2.3-.2.6-.2 1a2 2 0 002 2h12v-2H11.4l.9-1.7L19 4H6z"/>
      </svg>
      <span class="cart-count" *ngIf="cartCount() > 0">{{ cartCount() }}</span>
    </button>

  </div>
</header>

<main class="main-content">
  <router-outlet></router-outlet>
</main>

<app-footer></app-footer>
